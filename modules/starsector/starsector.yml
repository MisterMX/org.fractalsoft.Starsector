name: starsector
no-autogen: true
buildsystem: simple
sources:
  - type: archive
    url: https://s3.amazonaws.com/fractalsoftworks/starsector/starsector_linux-0.95a-RC15.zip
    sha256: de34d9d8d9c1105b2884aa38b2e39efdb2fa69fdfb46528c114f90ed220f21a8
  - type: file
    path: startup.sh
  - type: file
    path: org.fractalsoft.Starsector.desktop
  - type: file
    path: org.fractalsoft.Starsector.png
build-commands:
  - install startup.sh /app/
  - mkdir -p /app/share/applications /app/share/icons/hicolor/256x256/apps/
  - install org.fractalsoft.Starsector.desktop /app/share/applications/
  - install org.fractalsoft.Starsector.png /app/share/icons/hicolor/256x256/apps/
  - rmdir saves && ln -s ~/.var/app/org.fractalsoft.Starsector/data/saves saves
  - rmdir mods && ln -s ~/.var/app/org.fractalsoft.Starsector/data/mods mods
  - rmdir screenshots && ln -s ~/.var/app/org.fractalsoft.Starsector/data/screenshots screenshots
  - ln -s ~/.var/app/org.fractalsoft.Starsector/data logs
  - sed -i 's;logs=.;logs=./logs;g' starsector.sh
  - mkdir /app/starsector
  - mv * /app/starsector/
  - cat /app/starsector/starsector.sh
